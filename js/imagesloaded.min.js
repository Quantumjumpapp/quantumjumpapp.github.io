/*!
 * imagesLoaded PACKAGED v3.2.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(){function f(){}function b(i,h){for(var j=i.length;j--;){if(i[j].listener===h){return j}}return -1}function g(h){return function(){return this[h].apply(this,arguments)}}var a=f.prototype,d=this,c=d.EventEmitter;a.getListeners=function(k){var j,l,h=this._getEvents();if("object"==typeof k){j={};for(l in h){h.hasOwnProperty(l)&&k.test(l)&&(j[l]=h[l])}}else{j=h[k]||(h[k]=[])}return j},a.flattenListeners=function(i){var h,j=[];for(h=0;h<i.length;h+=1){j.push(i[h].listener)}return j},a.getListenersAsObject=function(i){var h,j=this.getListeners(i);return j instanceof Array&&(h={},h[i]=j),h||j},a.addListener=function(l,m){var h,k=this.getListenersAsObject(l),j="object"==typeof m;for(h in k){k.hasOwnProperty(h)&&-1===b(k[h],m)&&k[h].push(j?m:{listener:m,once:!1})}return this},a.on=g("addListener"),a.addOnceListener=function(i,h){return this.addListener(i,{listener:h,once:!0})},a.once=g("addOnceListener"),a.defineEvent=function(h){return this.getListeners(h),this},a.defineEvents=function(i){for(var h=0;h<i.length;h+=1){this.defineEvent(i[h])}return this},a.removeListener=function(l,m){var h,k,j=this.getListenersAsObject(l);for(k in j){j.hasOwnProperty(k)&&(h=b(j[k],m),-1!==h&&j[k].splice(h,1))}return this},a.off=g("removeListener"),a.addListeners=function(i,h){return this.manipulateListeners(!1,i,h)},a.removeListeners=function(i,h){return this.manipulateListeners(!0,i,h)},a.manipulateListeners=function(m,j,q){var h,l,k=m?this.removeListener:this.addListener,p=m?this.removeListeners:this.addListeners;if("object"!=typeof j||j instanceof RegExp){for(h=q.length;h--;){k.call(this,j,q[h])}}else{for(h in j){j.hasOwnProperty(h)&&(l=j[h])&&("function"==typeof l?k.call(this,h,l):p.call(this,h,l))}}return this},a.removeEvent=function(k){var j,l=typeof k,h=this._getEvents();if("string"===l){delete h[k]}else{if("object"===l){for(j in h){h.hasOwnProperty(j)&&k.test(j)&&delete h[j]}}else{delete this._events}}return this},a.removeAllListeners=g("removeEvent"),a.emitEvent=function(m,j){var q,h,l,k,p=this.getListenersAsObject(m);for(l in p){if(p.hasOwnProperty(l)){for(h=p[l].length;h--;){q=p[l][h],q.once===!0&&this.removeListener(m,q.listener),k=q.listener.apply(this,j||[]),k===this._getOnceReturnValue()&&this.removeListener(m,q.listener)}}}return this},a.trigger=g("emitEvent"),a.emit=function(i){var h=Array.prototype.slice.call(arguments,1);return this.emitEvent(i,h)},a.setOnceReturnValue=function(h){return this._onceReturnValue=h,this},a._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},a._getEvents=function(){return this._events||(this._events={})},f.noConflict=function(){return d.EventEmitter=c,f},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return f}):"object"==typeof module&&module.exports?module.exports=f:this.EventEmitter=f}).call(this),function(f){function b(e){var h=f.event;return h.target=h.target||h.srcElement||e,h}var g=document.documentElement,a=function(){};g.addEventListener?a=function(i,h,j){i.addEventListener(h,j,!1)}:g.attachEvent&&(a=function(j,k,h){j[k+h]=h.handleEvent?function(){var e=b(j);h.handleEvent.call(h,e)}:function(){var e=b(j);h.call(j,e)},j.attachEvent("on"+k,j[k+h])});var d=function(){};g.removeEventListener?d=function(i,h,j){i.removeEventListener(h,j,!1)}:g.detachEvent&&(d=function(k,j,l){k.detachEvent("on"+j,k[j+l]);try{delete k[j+l]}catch(h){k[j+l]=void 0}});var c={bind:a,unbind:d};"function"==typeof define&&define.amd?define("eventie/eventie",c):f.eventie=c}(this),function(b,a){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(d,c){return a(b,d,c)}):"object"==typeof module&&module.exports?module.exports=a(b,require("wolfy87-eventemitter"),require("eventie")):b.imagesLoaded=a(b,b.EventEmitter,b.eventie)}(window,function(v,A,j){function l(c,a){for(var d in a){c[d]=a[d]}return c}function b(a){return"[object Array]"==q.call(a)}function B(c){var a=[];if(b(c)){a=c}else{if("number"==typeof c.length){for(var d=0;d<c.length;d++){a.push(c[d])}}else{a.push(c)}}return a}function g(d,a,f){if(!(this instanceof g)){return new g(d,a,f)}"string"==typeof d&&(d=document.querySelectorAll(d)),this.elements=B(d),this.options=l({},this.options),"function"==typeof a?f=a:l(this.options,a),f&&this.on("always",f),this.getImages(),z&&(this.jqDeferred=new z.Deferred);var c=this;setTimeout(function(){c.check()})}function p(a){this.img=a}function y(c,a){this.url=c,this.element=a,this.img=new Image}var z=v.jQuery,x=v.console,q=Object.prototype.toString;g.prototype=new A,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var c=0;c<this.elements.length;c++){var a=this.elements[c];this.addElementImages(a)}},g.prototype.addElementImages=function(h){"IMG"==h.nodeName&&this.addImage(h),this.options.background===!0&&this.addElementBackgroundImages(h);var c=h.nodeType;if(c&&w[c]){for(var u=h.querySelectorAll("img"),a=0;a<u.length;a++){var f=u[a];this.addImage(f)}if("string"==typeof this.options.background){var d=h.querySelectorAll(this.options.background);for(a=0;a<d.length;a++){var m=d[a];this.addElementBackgroundImages(m)}}}};var w={1:!0,9:!0,11:!0};g.prototype.addElementBackgroundImages=function(f){for(var c=k(f),h=/url\(['"]*([^'"\)]+)['"]*\)/gi,a=h.exec(c.backgroundImage);null!==a;){var d=a&&a[1];d&&this.addBackground(d,f),a=h.exec(c.backgroundImage)}};var k=v.getComputedStyle||function(a){return a.currentStyle};return g.prototype.addImage=function(c){var a=new p(c);this.images.push(a)},g.prototype.addBackground=function(c,a){var d=new y(c,a);this.images.push(d)},g.prototype.check=function(){function d(m,o,h){setTimeout(function(){c.progress(m,o,h)})}var c=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length){return void this.complete()}for(var f=0;f<this.images.length;f++){var a=this.images[f];a.once("progress",d),a.check()}},g.prototype.progress=function(c,a,d){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!c.isLoaded,this.emit("progress",this,c,a),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,c),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&x&&x.log("progress: "+d,c,a)},g.prototype.complete=function(){var c=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(c,this),this.emit("always",this),this.jqDeferred){var a=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[a](this)}},p.prototype=new A,p.prototype.check=function(){var a=this.getIsImageComplete();return a?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,j.bind(this.proxyImage,"load",this),j.bind(this.proxyImage,"error",this),j.bind(this.img,"load",this),j.bind(this.img,"error",this),void (this.proxyImage.src=this.img.src))},p.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},p.prototype.confirm=function(c,a){this.isLoaded=c,this.emit("progress",this,this.img,a)},p.prototype.handleEvent=function(c){var a="on"+c.type;this[a]&&this[a](c)},p.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},p.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},p.prototype.unbindEvents=function(){j.unbind(this.proxyImage,"load",this),j.unbind(this.proxyImage,"error",this),j.unbind(this.img,"load",this),j.unbind(this.img,"error",this)},y.prototype=new p,y.prototype.check=function(){j.bind(this.img,"load",this),j.bind(this.img,"error",this),this.img.src=this.url;var a=this.getIsImageComplete();a&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},y.prototype.unbindEvents=function(){j.unbind(this.img,"load",this),j.unbind(this.img,"error",this)},y.prototype.confirm=function(c,a){this.isLoaded=c,this.emit("progress",this,this.element,a)},g.makeJQueryPlugin=function(a){a=a||v.jQuery,a&&(z=a,z.fn.imagesLoaded=function(d,c){var f=new g(this,d,c);return f.jqDeferred.promise(z(this))})},g.makeJQueryPlugin(),g});